"use strict";var a=class{constructor(){this.homeUrl="https://tonofura.wikiru.jp/?",this.editPage="cmd=edit&page=",this.skillAbilityPage="\u30B9\u30AD\u30EB\u52B9\u679C\u5225\u4E00\u89A7",this.skillAbilitySsrList="\u30C6\u30FC\u30D6\u30EB/\u30B9\u30AD\u30EB\u30FB\u30A2\u30D3\u30EA\u30C6\u30A3/SSR",this.skillAbilitySrList="\u30C6\u30FC\u30D6\u30EB/\u30B9\u30AD\u30EB\u30FB\u30A2\u30D3\u30EA\u30C6\u30A3/SR",this.characterList="\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u4E00\u89A7"}getSkillAbilityPage(){return this.homeUrl+this.skillAbilityPage}getSkillAbilitySsrList(){return this.homeUrl+this.editPage+this.skillAbilitySsrList}getSkillAbilitySrList(){return this.homeUrl+this.editPage+this.skillAbilitySrList}getWarGoddesList(){return this.homeUrl+this.characterList}};function T(e,n){let t=e.match(new RegExp(n));if(t?.groups){let i=t.groups.situation,s=t.index||0,o=e.slice(s+t[0].length);return o=o.replaceAll(/(^、| )/g,""),console.log("situationText:"+i),console.log("rest:"+o),{situationText:i,rest:o}}else return{situationText:"",rest:""}}function A(e,n){let t,i;({situationText:i,rest:t}=T(e,n));let s=[],o=C();console.log("blockRegex:"+o);let E={probability:"",turn:"",target:"",element:"",elementList:[],unit:"",member:"",connectBandC:""},d=x(t),c,m=!1;for(;(c=o.exec(t))!==null;){console.log("match:",c[0]);let b=D(c,E),f=I(c,d);t=t.slice(c.index+c[0].length),o.lastIndex=0,t.match(new RegExp($))&&(m=!0),console.log("rest:"+t);let B=v(t);if(d=x(t),b.elementList.forEach(k=>{let S=M(b,k);f.statusList.forEach(P=>{let u=H(S,P,f,B);u=u.replaceAll("\u5473\u65B9\u5473\u65B9","\u5473\u65B9"),console.log("effectDescription:",u),s.push(u)})}),m)break}return s}function v(e){let n="";if(e.match(r.etc)){let t=e.match(r.etc);n=t?t[0]:""}return n}var r={probability:"(?<probability>(\u78BA\u7387\u3067[0-9]+\u30BF\u30FC\u30F3|[0-9]+\u30BF\u30FC\u30F3\u78BA\u7387\u3067|\u9AD8\u78BA\u7387\u3067|))?",turn:"(?<turn>([0-9]+\u30BF\u30FC\u30F3))?(?:&br;)?",target:"(?<target>(?:\u6575\u5473\u65B9|\u5473\u65B9|\u81EA\u8EAB\u4EE5\u5916\u306E\u5473\u65B9|\u81EA\u8EAB\u4EE5\u5916\u306E|\u81EA\u8EAB\u3092\u9664\u304F\u5473\u65B9|\u81EA\u8EAB\u3092\u9664\u304F|\u81EA\u8EAB|\u6575|\u6575\u5168\u4F53\u3068\u81EA\u8EAB\u4EE5\u5916\u306E\u5473\u65B9|\u30B5\u30DD\u30FC\u30C8\u306E|PT\u5185\u306E))?",element:"(?<element>(?:(?:\u5473\u65B9)?(\u706B|\u6C34|\u98A8|\u96F7|\u5149|\u95C7|\u5168)(\u5C5E\u6027|\u5C5E\u6027\u6570|\u5C5E\u6027\u4EE5\u5916\u306E\u5C5E\u6027)?(\u5168\u4F53)?(?:\u3068|\u30FB)?)+)?",unit:"(?<unit>\u30E1\u30A4\u30F3\u30E6\u30CB\u30C3\u30C8|\u30E6\u30CB\u30C3\u30C8)?",member:"(?<number>(\u5168\u4F53|[1-5]\u4F53|\u5358\u4F53|[1-5]\uFF5E[1-5]\u4F53|\u30E1\u30A4\u30F3\u30E6\u30CB\u30C3\u30C8[1-5]\u4F53|[1-6]\u7A2E))",connectBandC:"(?<connectBandC>\u306F\u3055\u3089\u306B|\u306E|\u306B\u3064\u304D|\u3078\u306E|\u306EHP\u5272\u5408\u304C\u9AD8\u3044\u307B\u3069|(\u306B)?(\u81EA\u8EAB)?(\u306E)?HP\u304C\u5C11\u306A\u304F\u306A\u308B\u307B\u3069(\u81EA\u8EAB\u306E)?)?",status:"(?<status>(?:(?:\u653B\u6483\u529B|\u30B9\u30AD\u30EB\u5A01\u529B|\u9632\u5FA1(\u529B)?|\u72B6\u614B\u7570\u5E38\u8010\u6027|\u30B9\u30AD\u30EB\u30B2\u30FC\u30B8\u4E0A\u6607\u91CF|\u30B9\u30AD\u30EB\u30B2\u30FC\u30B8\u5897\u52A0\u91CF|\u30B9\u30AD\u30EB\u30B2\u30FC\u30B8|HP\u56DE\u5FA9\u91CF|HP|\u56DE\u5FA9\u91CF|\u56DE\u5FA9\u529B|\u72D9\u308F\u308C\u7387|\u72B6\u614B\u7570\u5E38\u4ED8\u4E0E\u7387|\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB(\u767A\u751F)?\u7387|(\u88AB)?\u30C0\u30E1\u30FC\u30B8)(?:\u3068|\u30FB)?)+)",connectStatusAndAmount:"(?<connectStatusAndAmount>(\u3092)?(\u3055\u3089\u306B)?)",amount:"(?<amount>[0-9]+|\u5FAE\u91CF|\u6700\u5927[0-9]+)(?<percent>%(\u307E\u3067)?)?(?<action>UP|DOWN|\u30AB\u30C3\u30C8|\u56DE\u5FA9|\u81EA\u52D5\u56DE\u5FA9|\u5897\u52A0|\u6E1B\u5C11)?",connector:"(?<connector>(\u3057|\u3055\u305B\u305F\u5F8C|\u3055\u305B\u308B|\u3055\u305B)?)(?:\u3001)?(?:&br;)?(\u3055\u3089\u306B)?(?:\u3001)?",etc:"(?:\u4E0E\u3048\u305F\u30C0\u30E1\u30FC\u30B8\u5408\u8A08\u306E[0-9]+%\u81EA\u8EAB\u306EHP\u56DE\u5FA9|\u81EA\u8EAB\u3078\u306E\u72B6\u614B\u7570\u5E38\u3092\u7121\u52B9\u5316|ATK[0-9]+%\u306E\u53CD\u6483\u3092\u767A\u52D5.1\u56DE\u306E\u307F\u767A\u52D5.)?(?:\u3059\u308B|\u3055\u305B\u308B)?(.\u81EA\u8EAB\u306E\u307F\u534A\u6E1B.)?(?:\u3002)?(?:\u203B)?(?:\\(\u91CD\u8907\u4E0D\u53EF\\))?(?:&br;)?(?:\\|)?"},$="(^|&br;)(HP(\u304C)?[0-9]+%\u3092\u5207\u3063\u305F\u6642|HP[0-9]+%\u4EE5\u4E0A|HP[0-9]+%\u4EE5\u4E0B)(\uFF64)?";function w(e){switch(e){case"\u653B\u6483":return"\u653B\u6483\u529B";case"\u9632\u5FA1":return"\u9632\u5FA1\u529B"}return e}function x(e){return e.match(/(?:UP|DOWN|カット|回復|自動回復|増加|減少)/)?.[0]||""}function C(){return new RegExp(`^${r.probability}${r.turn}${r.target}${r.element}?${r.unit}?${r.member}?${r.connectBandC}${r.status}${r.connectStatusAndAmount}${r.amount}${r.connector}`,"g")}function D(e,n){let t={probability:"",turn:"",target:"",element:"",elementList:[],unit:"",member:"",connectBandC:""};return e.groups?.target||e.groups?.element?(t.probability=e.groups?.probability||"",t.turn=e.groups?.turn||"",t.target=e.groups?.target||"",t.element=e.groups?.element||"",t.unit=e.groups?.unit||"",t.member=e.groups?.number||"",t.connectBandC=e.groups?.connectBandC||""):(t.probability=n.probability,t.turn=n.turn,t.target=n.target,t.element=n.element,t.unit=n.unit,t.member=n.member,t.connectBandC=n.connectBandC),t.elementList=t.element.split(/[・と]/),t.elementList=t.elementList.map(i=>i!==""&&!i.endsWith("\u5C5E\u6027")&&!i.endsWith("\u5C5E\u6027\u5168\u4F53")?i+"\u5C5E\u6027\u5168\u4F53":i),n.probability=t.probability,n.turn=t.turn,n.target=t.target,n.element=t.element,n.unit=t.unit,n.member=t.member,n.connectBandC=t.connectBandC,console.log("targets:",t),t}function I(e,n){let t={status:"",statusList:[],amount:"",connectStatusAndAmount:"",percent:"",action:"",connector:""};return t.status=e.groups?.status||"",t.status=w(t.status),t.statusList=t.status.split(/[・と]/),t.connectStatusAndAmount=e.groups?.connectStatusAndAmount||"",t.amount=e.groups?.amount||"",t.percent=e.groups?.percent||"",t.action=e.groups?.action||"",t.connector=e.groups?.connector||"",t.action==""?t.action=n:n=t.action,console.log("actions:",t),t}function M(e,n){return[e.probability,e.turn,e.target,n,e.unit,e.member,e.connectBandC].filter(Boolean).join(" ").replaceAll(" ","")}function H(e,n,t,i){return`${e}${n}${t.connectStatusAndAmount}${t.amount}${t.percent}${t.action}${t.connector}${i}`}var L=document.getElementById("inputText");if(!L)throw new Error("textarea with ID 'inputText' not found.");var h=document.getElementById("outputText");if(!h)throw new Error("textarea with ID 'outputText' not found.");var l=document.getElementById("situation");if(!l)throw new Error("textarea with ID 'situation' not found.");var g=document.getElementById("comboBox");if(!g)throw new Error("textarea with ID 'comboBox' not found.");document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("execute");e&&e.addEventListener("click",y)});var p=new a;document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("openPage1");e&&e.addEventListener("click",R)});function R(){window.open(p.getSkillAbilityPage(),"_blank")}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("openPage2");e&&e.addEventListener("click",U)});function U(){window.open(p.getSkillAbilitySsrList(),"_blank")}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("openPage3");e&&e.addEventListener("click",O)});function O(){window.open(p.getSkillAbilitySrList(),"_blank")}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("execute");e&&e.addEventListener("click",y)});function y(){h.value=W(L.value)}g.addEventListener("change",()=>{let e=g.value;e?l.value=e:l.value=""});function W(e){return e.split(`
`).map(i=>{if(i.startsWith("//")||i.trim()==""||i.match(/^#sort|\\|h$|\\|f$|\\|c$/))return i;let s=i.split("|");for(let o=6;o<s.length;o++)s[o]=A(s[o],l.value).join(`
`),s[o]=s[o].replace(/\n/g,"&br;");return s.join("|")}).join(`
`)}
//# sourceMappingURL=index.js.map